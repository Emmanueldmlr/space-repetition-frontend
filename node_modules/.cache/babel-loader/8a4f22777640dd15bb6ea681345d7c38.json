{"ast":null,"code":"import { action, thunk } from \"easy-peasy\";\nimport { FetchTodoService } from '../services/todoService';\nimport { item, sessionItem } from '../configs/index';\nconst todoModel = {\n  todos: [],\n  isLoading: false,\n  requestResponse: \"\",\n  fetchTodos: thunk(Actions => {\n    Actions.toggleIsLoading();\n    FetchTodoService().then(data => {\n      if (data.status) {\n        localStorage.setItem(item, data.data.token);\n        sessionStorage.setItem(sessionItem, JSON.stringify(data.data.user));\n        const newPayload = {\n          type: \"success\",\n          msg: data.data.message\n        };\n        Actions.updateRequestResponse(newPayload);\n        Actions.loginSuccess();\n        Actions.toggleIsLoading();\n\n        if (data.data.user.isVerified === 0) {\n          loginData.history.push(\"/account-verification\");\n        } else {\n          loginData.history.push(\"/homepage\");\n        }\n      } else {\n        const payload = {\n          type: 'error',\n          msg: data.error\n        };\n        Actions.updateRequestResponse(payload);\n        Actions.toggleIsLoading();\n      }\n    });\n  }),\n  //actions\n  toggleIsLoading: action(state => {\n    state.isLoading = !state.isLoading;\n  }),\n  updateRequestResponse: action((state, payload) => {\n    state.requestResponse = payload;\n  }),\n  clearResponse: action(state => {\n    state.requestResponse = null;\n  }),\n  fetchSuccess: action((state, payload) => {\n    state.todos = payload;\n  })\n};\nexport default todoModel;","map":{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/projects/React/space-repetition/src/Store/models/todoModel.js"],"names":["action","thunk","FetchTodoService","item","sessionItem","todoModel","todos","isLoading","requestResponse","fetchTodos","Actions","toggleIsLoading","then","data","status","localStorage","setItem","token","sessionStorage","JSON","stringify","user","newPayload","type","msg","message","updateRequestResponse","loginSuccess","isVerified","loginData","history","push","payload","error","state","clearResponse","fetchSuccess"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,KAAjB,QAA8B,YAA9B;AACA,SAAQC,gBAAR,QACO,yBADP;AAEA,SAAQC,IAAR,EAAaC,WAAb,QAA+B,kBAA/B;AACA,MAAMC,SAAS,GAAG;AACdC,EAAAA,KAAK,EAAC,EADQ;AAEdC,EAAAA,SAAS,EAAE,KAFG;AAGdC,EAAAA,eAAe,EAAC,EAHF;AAKdC,EAAAA,UAAU,EAAER,KAAK,CAAES,OAAD,IAAa;AAC3BA,IAAAA,OAAO,CAACC,eAAR;AACAT,IAAAA,gBAAgB,GACbU,IADH,CACSC,IAAD,IAAU;AACd,UAAIA,IAAI,CAACC,MAAT,EAAiB;AACfC,QAAAA,YAAY,CAACC,OAAb,CAAqBb,IAArB,EAA0BU,IAAI,CAACA,IAAL,CAAUI,KAApC;AACAC,QAAAA,cAAc,CAACF,OAAf,CAAuBZ,WAAvB,EAAmCe,IAAI,CAACC,SAAL,CAAeP,IAAI,CAACA,IAAL,CAAUQ,IAAzB,CAAnC;AACA,cAAMC,UAAU,GAAG;AACjBC,UAAAA,IAAI,EAAE,SADW;AAEjBC,UAAAA,GAAG,EAAEX,IAAI,CAACA,IAAL,CAAUY;AAFE,SAAnB;AAIAf,QAAAA,OAAO,CAACgB,qBAAR,CAA8BJ,UAA9B;AACAZ,QAAAA,OAAO,CAACiB,YAAR;AACAjB,QAAAA,OAAO,CAACC,eAAR;;AACA,YAAGE,IAAI,CAACA,IAAL,CAAUQ,IAAV,CAAeO,UAAf,KAA8B,CAAjC,EAAmC;AACjCC,UAAAA,SAAS,CAACC,OAAV,CAAkBC,IAAlB,CAAuB,uBAAvB;AACD,SAFD,MAEK;AACHF,UAAAA,SAAS,CAACC,OAAV,CAAkBC,IAAlB,CAAuB,WAAvB;AACD;AAEF,OAhBD,MAiBM;AACF,cAAMC,OAAO,GAAG;AACZT,UAAAA,IAAI,EAAE,OADM;AAEZC,UAAAA,GAAG,EAACX,IAAI,CAACoB;AAFG,SAAhB;AAIAvB,QAAAA,OAAO,CAACgB,qBAAR,CAA8BM,OAA9B;AACAtB,QAAAA,OAAO,CAACC,eAAR;AACH;AACF,KA3BH;AA4BD,GA9Bc,CALH;AAqCV;AACJA,EAAAA,eAAe,EAAEX,MAAM,CAAEkC,KAAD,IAAW;AAC/BA,IAAAA,KAAK,CAAC3B,SAAN,GAAkB,CAAC2B,KAAK,CAAC3B,SAAzB;AACH,GAFsB,CAtCT;AA0CdmB,EAAAA,qBAAqB,EAAE1B,MAAM,CAAC,CAACkC,KAAD,EAAQF,OAAR,KAAoB;AAC9CE,IAAAA,KAAK,CAAC1B,eAAN,GAAwBwB,OAAxB;AACH,GAF4B,CA1Cf;AA8CdG,EAAAA,aAAa,EAAEnC,MAAM,CAAEkC,KAAD,IAAW;AAC7BA,IAAAA,KAAK,CAAC1B,eAAN,GAAwB,IAAxB;AACH,GAFoB,CA9CP;AAkDd4B,EAAAA,YAAY,EAAEpC,MAAM,CAAC,CAACkC,KAAD,EAAQF,OAAR,KAAmB;AACpCE,IAAAA,KAAK,CAAC5B,KAAN,GAAc0B,OAAd;AACH,GAFmB;AAlDN,CAAlB;AAuDA,eAAe3B,SAAf","sourcesContent":["import { action, thunk } from \"easy-peasy\";\nimport {FetchTodoService, \n} from '../services/todoService'\nimport {item,sessionItem} from '../configs/index'\nconst todoModel = {\n    todos:[],\n    isLoading: false,\n    requestResponse:\"\",\n\n    fetchTodos: thunk((Actions) => {\n        Actions.toggleIsLoading();\n        FetchTodoService()\n          .then((data) => {\n            if (data.status) {\n              localStorage.setItem(item,data.data.token)\n              sessionStorage.setItem(sessionItem,JSON.stringify(data.data.user))\n              const newPayload = {\n                type: \"success\",\n                msg: data.data.message,\n              };\n              Actions.updateRequestResponse(newPayload)\n              Actions.loginSuccess()\n              Actions.toggleIsLoading();  \n              if(data.data.user.isVerified === 0){\n                loginData.history.push(\"/account-verification\") \n              }else{\n                loginData.history.push(\"/homepage\") \n              }\n                    \n            }\n             else {\n                const payload = {\n                    type: 'error',\n                    msg:data.error\n                }\n                Actions.updateRequestResponse(payload);\n                Actions.toggleIsLoading();\n            }\n          })\n      }),\n\n        //actions\n    toggleIsLoading: action((state) => {\n        state.isLoading = !state.isLoading;\n    }),\n\n    updateRequestResponse: action((state, payload) => {\n        state.requestResponse = payload;\n    }),\n\n    clearResponse: action((state) => {\n        state.requestResponse = null;\n    }),\n\n    fetchSuccess: action((state, payload)=> {\n        state.todos = payload;\n    })\n}\n\nexport default todoModel;"]},"metadata":{},"sourceType":"module"}