{"ast":null,"code":"var _jsxFileName = \"/Applications/XAMPP/xamppfiles/htdocs/projects/React/space-repetition/src/Pages/Auth/login.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useStoreState, useStoreActions } from 'easy-peasy';\nimport { Spin, notification } from \"antd\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport { item, sessionItem } from '../../Store/configs/index';\nconst antIcon = /*#__PURE__*/React.createElement(LoadingOutlined, {\n  style: {\n    fontSize: 24,\n    \"color\": \"white\"\n  },\n  spin: true,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 17\n  }\n});\n\nconst Login = props => {\n  let history = useHistory();\n  const {\n    requestResponse,\n    isLoading\n  } = useStoreState(state => state.auth);\n  const {\n    login,\n    clearResponse,\n    toggleIsLoading,\n    loginSuccess\n  } = useStoreActions(Actions => Actions.auth);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const openNotificationWithIcon = (type, msg) => {\n    notification[type]({\n      message: 'Notification Title',\n      description: msg\n    });\n  }; // useEffect(() => {\n  //   if (requestResponse !== null) {\n  //     if (requestResponse.type === \"success\") {\n  //       openNotificationWithIcon('success')\n  //     } else {\n  //       openNotificationWithIcon('error')\n  //     }\n  //     setTimeout(() => {\n  //       clearResponse();\n  //     }, 4000);\n  //   } else return;\n  // }, [requestResponse]);\n\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const params = {\n      data: {\n        email: email,\n        password: password\n      },\n      history: history\n    };\n\n    try {\n      const result = await login(params);\n\n      if (result.status) {\n        localStorage.setItem(item, result.data.token);\n        sessionStorage.setItem(sessionItem, JSON.stringify(result.data.user));\n        loginSuccess();\n        openNotificationWithIcon('success', result.data.message);\n\n        if (result.data.user.isVerified === 0) {\n          history.push(\"/account-verification\");\n        } else {\n          history.push(\"/homepage\");\n        }\n\n        console.log(\"here\");\n      } else {\n        openNotificationWithIcon('error', result.error);\n      }\n    } catch {\n      openNotificationWithIcon('error', \"Action Could not be Performed\");\n    } // setTimeout(() => {\n    //   console.log(requestResponse)\n    // }, 1000);\n\n\n    toggleIsLoading();\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"signup-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-addon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-paper-plane\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    className: \"form-control\",\n    name: \"email\",\n    placeholder: \"Email Address\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    required: \"required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-addon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-lock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    type: \"password\",\n    className: \"form-control\",\n    name: \"password\",\n    placeholder: \"Password\",\n    required: \"required\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary btn-block btn-lg\",\n    disabled: \"disabled\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Spin, {\n    indicator: antIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  })) : /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary btn-block btn-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  }, \"Dont have an account? \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 39\n    }\n  }, \"Register here\"), \".\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/forgot-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 16\n    }\n  }, \"Forgot Password?\"), \".\")))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/projects/React/space-repetition/src/Pages/Auth/login.js"],"names":["React","useState","useEffect","Link","useHistory","useStoreState","useStoreActions","Spin","notification","LoadingOutlined","item","sessionItem","antIcon","fontSize","Login","props","history","requestResponse","isLoading","state","auth","login","clearResponse","toggleIsLoading","loginSuccess","Actions","email","setEmail","password","setPassword","openNotificationWithIcon","type","msg","message","description","handleSubmit","e","preventDefault","params","data","result","status","localStorage","setItem","token","sessionStorage","JSON","stringify","user","isVerified","push","console","log","error","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {Link,useHistory} from 'react-router-dom'\nimport {useStoreState, useStoreActions} from 'easy-peasy'\nimport { Spin,notification } from \"antd\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport {item,sessionItem} from '../../Store/configs/index'\n\nconst antIcon = <LoadingOutlined style={{ fontSize: 24, \"color\" : \"white\" }} spin />;\n    \nconst Login = (props) => {\n    let history = useHistory();\n    const { requestResponse, isLoading } = useStoreState((state) => state.auth);\n    const {login,clearResponse,toggleIsLoading, loginSuccess} = useStoreActions((Actions) => Actions.auth);\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n\n    const openNotificationWithIcon = (type, msg) => {\n      notification[type]({\n        message: 'Notification Title',\n        description:msg\n      });\n    };\n\n    // useEffect(() => {\n    //   if (requestResponse !== null) {\n    //     if (requestResponse.type === \"success\") {\n    //       openNotificationWithIcon('success')\n    //     } else {\n    //       openNotificationWithIcon('error')\n    //     }\n    //     setTimeout(() => {\n    //       clearResponse();\n    //     }, 4000);\n    //   } else return;\n    // }, [requestResponse]);\n\n    async function handleSubmit (e) {\n      e.preventDefault();\n      const params = {\n        data: {\n          email: email,\n          password: password,\n        },\n        history : history\n      };\n      try{\n        const result = await login(params);\n        if(result.status){\n          localStorage.setItem(item,result.data.token)\n          sessionStorage.setItem(sessionItem,JSON.stringify(result.data.user))\n          loginSuccess()\n          openNotificationWithIcon('success', result.data.message)\n          if(result.data.user.isVerified === 0){\n          history.push(\"/account-verification\") \n          }else{\n         history.push(\"/homepage\") \n          }\n            console.log(\"here\")\n        }\n        else{\n          openNotificationWithIcon('error', result.error)\n        }\n      }\n      catch{\n        openNotificationWithIcon('error', \"Action Could not be Performed\")\n      }\n      // setTimeout(() => {\n      //   console.log(requestResponse)\n      // }, 1000);\n      toggleIsLoading(); \n      \n    };\n\n    return (\n      <form onSubmit={handleSubmit}>\n        <div>\n          <div className=\"signup-form\">\n            <div>\n              <h2>Sign In</h2>\n              <div className=\"form-group\">\n                <div className=\"input-group\">\n                  <span className=\"input-group-addon\">\n                    <i className=\"fa fa-paper-plane\"></i>\n                  </span>\n                  <input\n                    type=\"email\"\n                    className=\"form-control\"\n                    name=\"email\"\n                    placeholder=\"Email Address\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    required=\"required\"\n                  />\n                </div>\n              </div>\n              <div className=\"form-group\">\n                <div className=\"input-group\">\n                  <span className=\"input-group-addon\">\n                    <i className=\"fa fa-lock\"></i>\n                  </span>\n                  <input\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    type=\"password\"\n                    className=\"form-control\"\n                    name=\"password\"\n                    placeholder=\"Password\"\n                    required=\"required\"\n                  />\n                </div>\n              </div>\n              <div className=\"form-group\">\n                {isLoading ? (\n                  <button\n                    type=\"submit\"\n                    className=\"btn btn-primary btn-block btn-lg\"\n                    disabled=\"disabled\"\n                  >\n                    <Spin indicator={antIcon} />\n                  </button>\n                ) : (\n                  <button\n                    type=\"submit\"\n                    className=\"btn btn-primary btn-block btn-lg\"\n                  >\n                    Login\n                  </button>\n                )}\n              </div>\n              <div className=\"text-center\">\n                Dont have an account? <Link to=\"/register\">Register here</Link>.\n              </div>\n              <div className=\"text-center\">\n               <Link to=\"/forgot-password\">Forgot Password?</Link>.\n              </div>\n            </div>\n          </div>\n        </div>\n      </form>\n    );\n}\n  \nexport default Login;"]},"metadata":{},"sourceType":"module"}