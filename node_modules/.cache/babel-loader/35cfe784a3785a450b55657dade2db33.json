{"ast":null,"code":"import { action, thunk } from \"easy-peasy\";\nimport { LoginService, RegisterService, EmailConfirmationService } from '../services/authService';\nimport { item } from '../configs/index';\nconst authModel = {\n  user: null,\n  requestResponse: null,\n  isLoading: false,\n  isAuthed: true,\n  login: thunk((Actions, loginData) => {\n    Actions.toggleIsLoading();\n    LoginService(loginData.data).then(data => {\n      if (data.status) {\n        localStorage.setItem(item, data.data.token);\n        const newPayload = {\n          type: \"success\",\n          msg: data.data.message\n        };\n        Actions.updateRequestResponse(newPayload);\n        Actions.loginSuccess(data);\n        Actions.toggleIsLoading();\n\n        if (data.data.user.isVerified === 0) {\n          loginData.history.push(\"/account-verification\");\n        } else {\n          loginData.history.push(\"/\");\n        }\n      } else {\n        const payload = {\n          type: 'error',\n          msg: data.error\n        };\n        Actions.updateRequestResponse(payload);\n        Actions.toggleIsLoading();\n      }\n    });\n  }),\n  register: thunk((Actions, registerData) => {\n    Actions.toggleIsLoading();\n\n    if (registerData.data.password !== registerData.data.confirmPassword) {\n      const payload = {\n        type: \"error\",\n        msg: \"Passwords do not match\"\n      };\n      Actions.updateRequestResponse(payload);\n      Actions.toggleIsLoading();\n      return;\n    }\n\n    RegisterService(registerData.data).then(data => {\n      if (data.status) {\n        const payload = {\n          type: \"success\",\n          msg: data.data.message\n        };\n        Actions.updateRequestResponse(payload);\n        Actions.toggleIsLoading();\n        registerData.history.push(\"/registration-success-notification\");\n      } else {\n        const payload = {\n          type: \"error\",\n          msg: data.error\n        };\n        Actions.updateRequestResponse(payload);\n        Actions.toggleIsLoading();\n      }\n    });\n  }),\n  confirmEmail: thunk((Actions, token) => {\n    Actions.toggleIsLoading();\n\n    if (token === '') {\n      const payload = {\n        type: \"error\",\n        msg: \"Invalid Token\"\n      };\n      Actions.updateRequestResponse(payload);\n      Actions.toggleIsLoading();\n      return;\n    }\n\n    EmailConfirmationService(token).then(data => {\n      if (data.status) {\n        const payload = {\n          type: \"success\",\n          msg: data.data.message\n        };\n        Actions.updateRequestResponse(payload);\n        Actions.toggleIsLoading();\n      } else {\n        const payload = {\n          type: \"error\",\n          msg: data.error\n        };\n        Actions.updateRequestResponse(payload);\n        Actions.toggleIsLoading();\n      }\n    });\n  }),\n  //actions\n  toggleIsLoading: action(state => {\n    state.isLoading = !state.isLoading;\n  }),\n  updateRequestResponse: action((state, payload) => {\n    state.requestResponse = payload;\n  }),\n  clearResponse: action(state => {\n    state.requestResponse = null;\n  }),\n  loginSuccess: action((state, payload) => {\n    state.user = payload.user;\n    state.isAuthed = true;\n  })\n};\nexport default authModel;","map":{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/projects/React/space-repetition/src/Store/models/authModel.js"],"names":["action","thunk","LoginService","RegisterService","EmailConfirmationService","item","authModel","user","requestResponse","isLoading","isAuthed","login","Actions","loginData","toggleIsLoading","data","then","status","localStorage","setItem","token","newPayload","type","msg","message","updateRequestResponse","loginSuccess","isVerified","history","push","payload","error","register","registerData","password","confirmPassword","confirmEmail","state","clearResponse"],"mappings":"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","sourcesContent":["import { action, thunk } from \"easy-peasy\";\nimport {LoginService, RegisterService, EmailConfirmationService} from '../services/authService'\nimport {item} from '../configs/index'\n\nconst authModel = {\n  user: null,\n  requestResponse: null,\n  isLoading: false,\n  isAuthed: true,\n\n  login: thunk((Actions, loginData) => {\n    Actions.toggleIsLoading();\n    LoginService(loginData.data)\n      .then((data) => {\n        if (data.status) {\n          localStorage.setItem(item,data.data.token)\n          const newPayload = {\n            type: \"success\",\n            msg: data.data.message,\n          };\n          Actions.updateRequestResponse(newPayload)\n          Actions.loginSuccess(data)\n          Actions.toggleIsLoading();  \n          if(data.data.user.isVerified === 0){\n            loginData.history.push(\"/account-verification\") \n          }else{\n            loginData.history.push(\"/\") \n          }\n                \n        }\n         else {\n            const payload = {\n                type: 'error',\n                msg:data.error\n            }\n            Actions.updateRequestResponse(payload);\n            Actions.toggleIsLoading();\n        }\n      })\n  }),\n\n  register: thunk((Actions, registerData) => {\n    Actions.toggleIsLoading();\n    if (registerData.data.password !== registerData.data.confirmPassword) {\n        const payload = {\n          type: \"error\",\n          msg: \"Passwords do not match\",\n        };\n        Actions.updateRequestResponse(payload);\n        Actions.toggleIsLoading();\n        return\n    }\n    RegisterService(registerData.data)\n    .then((data) =>{\n        if (data.status) {\n          const payload = {\n            type: \"success\",\n            msg: data.data.message,\n          };\n          Actions.updateRequestResponse(payload);\n          Actions.toggleIsLoading();\n          registerData.history.push(\"/registration-success-notification\");\n        }\n         else {\n          const payload = {\n            type: \"error\",\n            msg: data.error,\n          };\n          Actions.updateRequestResponse(payload);\n          Actions.toggleIsLoading();\n        }\n    })\n  }),\n\n  confirmEmail: thunk((Actions, token) => {\n    Actions.toggleIsLoading();\n    if (token ===''){\n        const payload = {\n          type: \"error\",\n          msg: \"Invalid Token\",\n        };\n        Actions.updateRequestResponse(payload);\n        Actions.toggleIsLoading();\n        return\n    }\n    EmailConfirmationService(token)\n    .then((data) =>{\n        if (data.status) {\n          const payload = {\n            type: \"success\",\n            msg: data.data.message,\n          };\n          Actions.updateRequestResponse(payload);\n          Actions.toggleIsLoading();\n        }\n         else {\n          const payload = {\n            type: \"error\",\n            msg: data.error,\n          };\n          Actions.updateRequestResponse(payload);\n          Actions.toggleIsLoading();\n        }\n    })\n  }),\n\n  //actions\n  toggleIsLoading: action((state) => {\n    state.isLoading = !state.isLoading;\n  }),\n\n  updateRequestResponse: action((state, payload) => {\n    state.requestResponse = payload;\n  }),\n\n  clearResponse: action((state) => {\n    state.requestResponse = null;\n  }),\n\n  loginSuccess: action((state,payload)=> {\n      state.user = payload.user;\n      state.isAuthed = true;\n  })\n};\n\nexport default authModel"]},"metadata":{},"sourceType":"module"}